
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Guia de bastionamiento de arranque de Debian 13</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid="ID de Google Analytics"
                  id="1"
                  title="Guia de bastionamiento de arranque de Debian 13"
                  environment="web"
                  feedback-link="Un enlace en el que los usuarios puedan darte feedback (quizás creando un issue en un repositorio de git)">
    
      <google-codelab-step label="Paso 1: Ocultación del menú de arranque" duration="0">
        <p>Lo primero que vamos a hacer es ocultar el menú de arranque, para evitar que atacantes o usuarios sin conocimientos que modificen parámetros de arranques, reduciendo la posibilidad de que puedan acceder a funciones adicionales, como el arranque como root. Para ello, introducimos en la terminal:</p>
<pre><code>sudo nano /etc/default/grub
</code></pre>
<p class="image-container"><img alt="img1" src="img\\b3e58ac3d06d8786.png"></p>
<p>Modificamos y/o añadimos las líneas siguientes:</p>
<pre><code>GRUB_TIMEOUT_STYLE=hidden
GRUB_TIMEOUT=0
</code></pre>
<p class="image-container"><img alt="img2" src="img\\e506f5f8bc21c670.png"></p>
<p>Guardamos los cambios con (<code>Ctrl + O</code> y Enter) y salimos de nano (<code>Ctrl + X</code>).</p>
<p>Actualizamos la configuración de GRUB:</p>
<pre><code>sudo update-grub
</code></pre>
<p class="image-container"><img alt="img3" src="img\\52ba5e5e52833876.png"></p>
<p><strong>Resultado:</strong> El menú se oculta. Solo aparece usando <code>Esc</code> durante el arranque.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Paso 2: Configurar contraseña de arranque" duration="0">
        <p>Configurar la contraseña del GRUB hace que usuarios no autorizados no puedan editar opciones del arranque, acceder a la consola o modificar entradas para obtener acceso root (init=/bin/bash).</p>
<p>Generamos el hash de la contraseña con el siguiente comando:</p>
<pre><code>sudo grub-mkpasswd-pbkdf2
</code></pre>
<p class="image-container"><img alt="img4" src="img\\26d42b0ea1c4c0f6.png"></p>
<p>Introducimos la contraseña del GRUB y copiamos el hash en un lugar seguro.</p>
<p>Ahora, editaremos el script de configuración personalizado con el usuario de Debian y el hash recién creado:</p>
<pre><code>sudo nano /etc/grub.d/40_custom
</code></pre>
<p>Añadimos al final (sustituimos <code>usuario</code> y <code>hash</code>):</p>
<pre><code>set superusers=&#34;usuario&#34;
password_pbkdf2 usuario hash
</code></pre>
<p class="image-container"><img alt="img5" src="img\\c5772eb6622b2893.png"></p>
<p>Guardamos, cerramos y actualizamos GRUB:</p>
<pre><code>sudo update-grub
</code></pre>
<p class="image-container"><img alt="img6" src="img\\489b4f3a0eb637a2.png"></p>
<p><strong>Resultado:</strong> Habría que introducir usuario/contraseña para cualquier acción administrativa en GRUB, hasta para acceder al sistema operativo.</p>
<p class="image-container"><img alt="img7" src="img\\2163817bb2f22bbe.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Paso 3: Copia de seguridad de la configuración del arranque" duration="0">
        <p>Antes de modificar nada del GRUB, crearemos copias de seguridad. Se realiza en el caso de que hagamos errores al modificar las opciones de arranque y poder recuperar rápidamente la funcionalidad del equipo. Si se comete un error en el GRUB, puede dejar el sistema inutilizable.</p>
<p>Se realizan con:</p>
<pre><code>sudo cp /etc/default/grub ~/grub-backup-default
sudo cp -r /etc/grub.d ~/grub-backup-grub.d
</code></pre>
<p class="image-container"><img alt="img8" src="img\\cc57142e3def8efd.png"></p>
<p><strong>Para restaurar:</strong></p>
<pre><code>sudo cp ~/grub-backup-default /etc/default/grub
sudo cp -r ~/grub-backup-grub.d/* /etc/grub.d/
sudo update-grub
</code></pre>
<p class="image-container"><img alt="img9" src="img\\2fc7534c41dee67a.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Paso 4: Otras opciones de seguridad" duration="0">
        <ul>
<li><strong>Contraseña BIOS/UEFI:</strong> Como en el proyecto anterior, podemos introducir la contraseña de administrador y usuario de la BIOS para mayor seguridad ante intento de acceso físico.</li>
<li><strong>Secure Boot:</strong> Evita de que el atacante pueda ejecutar software no firmado o malicioso, reduciendo la superficie de ataque</li>
<li><strong>Cifrado completo de disco:</strong> Seleccionamos durante la instalación (&#34;LVM cifrado&#34;), y también pudiendose separar en particiones, en el caso de Debian</li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
